{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Enverd\\\\Purwadhika\\\\FrontEnd\\\\bioskopticketing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport Axios from \"axios\"; // AXIOS GET ?\n\nconst INITIAL_STATE = {\n  currentUser: \"\",\n  IS_LOGGED_IN: false,\n  IS_ADMIN: false,\n  saldo: 0\n};\nvar saldouser = 0;\n\nvar CountReducer = (state = INITIAL_STATE, action) => {\n  getSaldo = userid => {\n    Axios.get('http://localhost:2000/users?username=' + userid).then(res => {\n      saldouser = res.data[0].saldo;\n      return saldouser;\n    }).catch(err => {\n      return err;\n    });\n  };\n\n  if (action.type === 'USER') {\n    Axios.get('http://localhost:2000/users?username=' + action.payload.username).then(res => {\n      var saldouser = res.data[0].saldo;\n      console.log(saldouser);\n    }).catch(err => {\n      console.log(err);\n    }); // GET SALDO \n\n    var userid = action.payload.username;\n    localStorage.setItem('username', userid);\n    return _objectSpread({}, state, {\n      IS_LOGGED_IN: true,\n      IS_ADMIN: false,\n      currentUser: userid,\n      saldo: saldouser\n    });\n  } else if (action.type === 'ADMIN') {\n    var userid = action.payload.username;\n    var saldouser = this.getSaldo(userid);\n    localStorage.setItem('username', userid);\n    console.log(saldouser);\n    return _objectSpread({}, state, {\n      IS_LOGGED_IN: true,\n      IS_ADMIN: true,\n      currentUser: userid\n    });\n  } else if (action.type === \"LOGOUT\") {\n    // localStorage.clear()\n    localStorage.removeItem(\"username\");\n    return INITIAL_STATE;\n  } else {\n    return state;\n  }\n};\n\nexport default CountReducer;","map":{"version":3,"sources":["C:\\Users\\Enverd\\Purwadhika\\FrontEnd\\bioskopticketing\\src\\redux\\reducers\\countReducers.js"],"names":["Axios","INITIAL_STATE","currentUser","IS_LOGGED_IN","IS_ADMIN","saldo","saldouser","CountReducer","state","action","getSaldo","userid","get","then","res","data","catch","err","type","payload","username","console","log","localStorage","setItem","removeItem"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAGA;;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,WAAW,EAAG,EADI;AAElBC,EAAAA,YAAY,EAAG,KAFG;AAGlBC,EAAAA,QAAQ,EAAG,KAHO;AAIlBC,EAAAA,KAAK,EAAG;AAJU,CAAtB;AAOA,IAAIC,SAAS,GAAG,CAAhB;;AAIA,IAAIC,YAAY,GAAG,CAACC,KAAK,GAAGP,aAAT,EAAwBQ,MAAxB,KAAkC;AACjDC,EAAAA,QAAQ,GAAIC,MAAD,IAAY;AACnBX,IAAAA,KAAK,CAACY,GAAN,CAAU,0CAAwCD,MAAlD,EACKE,IADL,CACWC,GAAD,IAAO;AACRR,MAAAA,SAAS,GAAGQ,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAYV,KAAxB;AACA,aAAOC,SAAP;AAEJ,KALL,EAMKU,KANL,CAMYC,GAAD,IAAO;AACV,aAAOA,GAAP;AACH,KARL;AASH,GAVD;;AAWA,MAAGR,MAAM,CAACS,IAAP,KAAgB,MAAnB,EAA0B;AAEtBlB,IAAAA,KAAK,CAACY,GAAN,CAAU,0CAAwCH,MAAM,CAACU,OAAP,CAAeC,QAAjE,EACCP,IADD,CACOC,GAAD,IAAO;AACR,UAAIR,SAAS,GAAEQ,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAYV,KAA3B;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAYhB,SAAZ;AAEJ,KALD,EAMCU,KAND,CAMQC,GAAD,IAAO;AACVI,MAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACH,KARD,EAFsB,CAWtB;;AACA,QAAIN,MAAM,GAAGF,MAAM,CAACU,OAAP,CAAeC,QAA5B;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCb,MAAjC;AACA,6BAAUH,KAAV;AAAiBL,MAAAA,YAAY,EAAG,IAAhC;AAAsCC,MAAAA,QAAQ,EAAG,KAAjD;AAAwDF,MAAAA,WAAW,EAAGS,MAAtE;AAA8EN,MAAAA,KAAK,EAAGC;AAAtF;AACH,GAfD,MAgBK,IAAGG,MAAM,CAACS,IAAP,KAAgB,OAAnB,EAA2B;AAI5B,QAAIP,MAAM,GAAGF,MAAM,CAACU,OAAP,CAAeC,QAA5B;AACA,QAAId,SAAS,GAAG,KAAKI,QAAL,CAAcC,MAAd,CAAhB;AACAY,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCb,MAAjC;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAYhB,SAAZ;AACA,6BAAUE,KAAV;AAAiBL,MAAAA,YAAY,EAAG,IAAhC;AAAsCC,MAAAA,QAAQ,EAAG,IAAjD;AAAuDF,MAAAA,WAAW,EAAGS;AAArE;AACH,GATI,MAUA,IAAGF,MAAM,CAACS,IAAP,KAAgB,QAAnB,EAA4B;AAC7B;AACAK,IAAAA,YAAY,CAACE,UAAb,CAAwB,UAAxB;AACA,WAAOxB,aAAP;AACH,GAJI,MAKA;AACD,WAAOO,KAAP;AACH;AACJ,CA9CD;;AAiDA,eAAeD,YAAf","sourcesContent":["import Axios from \"axios\";\r\n\r\n\r\n// AXIOS GET ?\r\n\r\nconst INITIAL_STATE = { \r\n    currentUser : \"\",\r\n    IS_LOGGED_IN : false,\r\n    IS_ADMIN : false,\r\n    saldo : 0,\r\n}\r\n\r\nvar saldouser = 0\r\n\r\n\r\n\r\nvar CountReducer = (state = INITIAL_STATE, action) =>{\r\n    getSaldo = (userid) => {\r\n        Axios.get('http://localhost:2000/users?username='+userid)\r\n            .then((res)=>{\r\n                 saldouser = res.data[0].saldo\r\n                 return saldouser\r\n                \r\n            }) \r\n            .catch((err)=>{\r\n                return err\r\n            })\r\n    }\r\n    if(action.type === 'USER'){\r\n      \r\n        Axios.get('http://localhost:2000/users?username='+action.payload.username)\r\n        .then((res)=>{\r\n             var saldouser =res.data[0].saldo\r\n             console.log(saldouser)\r\n             \r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n        // GET SALDO \r\n        var userid = action.payload.username\r\n        localStorage.setItem('username', userid)\r\n        return{...state, IS_LOGGED_IN : true, IS_ADMIN : false, currentUser : userid, saldo : saldouser}\r\n    }\r\n    else if(action.type === 'ADMIN'){\r\n        \r\n        \r\n        \r\n        var userid = action.payload.username\r\n        var saldouser = this.getSaldo(userid)\r\n        localStorage.setItem('username', userid)\r\n        console.log(saldouser)\r\n        return{...state, IS_LOGGED_IN : true, IS_ADMIN : true, currentUser : userid}\r\n    }\r\n    else if(action.type === \"LOGOUT\"){\r\n        // localStorage.clear()\r\n        localStorage.removeItem(\"username\")\r\n        return INITIAL_STATE\r\n    }\r\n    else {\r\n        return state\r\n    }\r\n}\r\n\r\n\r\nexport default CountReducer;"]},"metadata":{},"sourceType":"module"}