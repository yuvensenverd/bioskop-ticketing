{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Enverd\\\\Purwadhika\\\\FrontEnd\\\\bioskopticketing\\\\src\\\\pages\\\\usersetting.jsx\";\nimport React from 'react';\nimport { Paper } from '@material-ui/core';\nimport { connect } from 'react-redux';\nimport Axios from 'axios';\nimport { Redirect } from 'react-router';\n\nclass usersetting extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      errormsg: 'asd',\n      redirect: false\n    };\n\n    this.changePassword = () => {\n      var oldpassword = this.refs.oldpass.value;\n      console.log(oldpassword);\n      var newpassword = this.refs.newpass.value;\n      var newpassword2 = this.refs.newpass2.value;\n\n      if (newpassword !== newpassword2) {\n        return this.setState({\n          errormsg: \"Password dan Password Konfirmasi Salah!\"\n        });\n      }\n\n      Axios.get('http://localhost:2000/users?username=' + this.props.currentUser).then(res => {\n        console.log(res.data[0].password);\n\n        if (res.data[0].password !== oldpassword) {\n          return this.setState({\n            errormsg: \"Password Lama Salah!\"\n          });\n        }\n\n        Axios.patch('http://localhost:2000/users/' + res.data[0].id, {\n          password: newpassword\n        }).then(res => {\n          this.setState({\n            redirect: true\n          });\n          window.alert(\"Password Telah Berhasil Diubah\");\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  render() {\n    if (this.state.redirect === true) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      });\n    }\n\n    if (this.props.IS_LOGGED_IN === false) {\n      return React.createElement(\"div\", {\n        className: \"pt-5 filtercss\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \" Login First before change the password\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"mycontainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row justify-content-center mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" mt-5 col-md-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: \"p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Change Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"oldpass\",\n      className: \"form-control form-control-lg mt-3\",\n      placeholder: \"CURRENT PASSWORD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"newpass\",\n      className: \"form-control form-control-lg mt-3\",\n      placeholder: \"NEW PASSWORD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"newpass2\",\n      className: \"form-control  form-control-lg mt-3 mb-3 \",\n      placeholder: \"CONFIRM NEW PASSWORD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"mb-3\",\n      style: {\n        color: \"red\",\n        fontWeight: \"bolder\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \" \"), React.createElement(\"input\", {\n      type: \"button\",\n      className: \"btn btn-success btn-lg mt-3 mb-5\",\n      value: \"Change Password\",\n      onClick: () => this.changePassword(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), this.state.errormsg === '' ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }) : this.state.errormsg !== '' ? React.createElement(\"div\", {\n      style: {\n        height: \"70px\"\n      },\n      className: \"alert alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \" \", this.state.errormsg, \" \", React.createElement(\"span\", {\n      style: {\n        fontWeight: \"bolder\",\n        cursor: 'pointer',\n        float: \"right\"\n      },\n      onClick: () => {\n        this.setState({\n          errormsg: \"\"\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \" X\")) : null))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.CURRENT_USER_DATA.currentUser,\n    IS_ADMIN: state.CURRENT_USER_DATA.IS_ADMIN,\n    IS_LOGGED_IN: state.CURRENT_USER_DATA.IS_LOGGED_IN,\n    saldouser: state.CURRENT_USER_DATA.saldo,\n    cartlength: state.CURRENT_USER_DATA.cartlength\n  };\n};\n\nexport default connect(mapStateToProps)(usersetting);","map":{"version":3,"sources":["C:\\Users\\Enverd\\Purwadhika\\FrontEnd\\bioskopticketing\\src\\pages\\usersetting.jsx"],"names":["React","Paper","connect","Axios","Redirect","usersetting","Component","state","errormsg","redirect","changePassword","oldpassword","refs","oldpass","value","console","log","newpassword","newpass","newpassword2","newpass2","setState","get","props","currentUser","then","res","data","password","patch","id","window","alert","catch","err","render","IS_LOGGED_IN","color","fontWeight","height","cursor","float","mapStateToProps","CURRENT_USER_DATA","IS_ADMIN","saldouser","saldo","cartlength"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Paper} from '@material-ui/core'\r\nimport {connect} from 'react-redux'\r\nimport Axios from 'axios'\r\nimport {Redirect} from 'react-router'\r\n\r\nclass usersetting extends React.Component{\r\n    state = {\r\n        errormsg : 'asd',\r\n        redirect : false\r\n    }\r\n    changePassword = () =>{\r\n        var oldpassword = this.refs.oldpass.value\r\n        console.log(oldpassword)\r\n        var newpassword = this.refs.newpass.value\r\n        var newpassword2 = this.refs.newpass2.value\r\n        if(newpassword !== newpassword2){\r\n            return(\r\n                this.setState({\r\n                    errormsg : \"Password dan Password Konfirmasi Salah!\"\r\n                })\r\n            )\r\n        }\r\n       \r\n        Axios.get('http://localhost:2000/users?username='+ this.props.currentUser)\r\n        .then((res)=>{\r\n            console.log(res.data[0].password)\r\n            if(res.data[0].password !== oldpassword){\r\n               \r\n                return (\r\n                    this.setState({\r\n                        errormsg : \"Password Lama Salah!\"\r\n                    })\r\n                )\r\n            }\r\n            Axios.patch('http://localhost:2000/users/'+res.data[0].id, {password : newpassword})\r\n            .then((res)=>{\r\n                this.setState({\r\n                    redirect : true\r\n                })\r\n                window.alert(\"Password Telah Berhasil Diubah\")\r\n\r\n            })\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n\r\n\r\n\r\n        \r\n    }\r\n\r\n    render(){\r\n        if(this.state.redirect === true){\r\n            return(\r\n                <Redirect to=\"/\"></Redirect>\r\n            )\r\n        }\r\n        if(this.props.IS_LOGGED_IN === false){\r\n            return (\r\n                <div className=\"pt-5 filtercss\"> Login First before change the password</div>\r\n            )\r\n        }\r\n        return(\r\n            <div className=\"mycontainer\" >\r\n            <div className='row justify-content-center mt-5'>\r\n                <div className=\" mt-5 col-md-8\">\r\n                    <Paper  className=\"p-5\">\r\n                        <h1 className=\"mb-5\">Change Password</h1>\r\n                        <input type=\"password\" ref=\"oldpass\" className=\"form-control form-control-lg mt-3\" placeholder=\"CURRENT PASSWORD\"></input>\r\n                        <input type=\"password\" ref=\"newpass\" className=\"form-control form-control-lg mt-3\" placeholder=\"NEW PASSWORD\"></input>\r\n                        <input type=\"password\" ref=\"newpass2\" className=\"form-control  form-control-lg mt-3 mb-3 \" placeholder=\"CONFIRM NEW PASSWORD\"></input>\r\n                        <p className=\"mb-3\" style={{color : \"red\", fontWeight : \"bolder\"}}> </p>\r\n                        <input type=\"button\" className=\"btn btn-success btn-lg mt-3 mb-5\" value=\"Change Password\" onClick={() => this.changePassword()}></input>\r\n                    \r\n                        {\r\n                            this.state.errormsg === '' \r\n                            ?\r\n                            <p></p>\r\n                            :\r\n                            this.state.errormsg !== ''\r\n                            ?\r\n                            <div style={{height : \"70px\"}}className='alert alert-danger'> {this.state.errormsg} <span style={{fontWeight : \"bolder\", cursor : 'pointer', float : \"right\"}} onClick={()=>{this.setState({errormsg : \"\"})}}> X</span></div>\r\n                            :\r\n                            null\r\n                        }\r\n                        \r\n\r\n                    </Paper>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n       currentUser : state.CURRENT_USER_DATA.currentUser,\r\n       IS_ADMIN : state.CURRENT_USER_DATA.IS_ADMIN,\r\n       IS_LOGGED_IN : state.CURRENT_USER_DATA.IS_LOGGED_IN,\r\n       saldouser : state.CURRENT_USER_DATA.saldo,\r\n       cartlength : state.CURRENT_USER_DATA.cartlength\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(usersetting);"]},"metadata":{},"sourceType":"module"}