{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Enverd\\\\Purwadhika\\\\FrontEnd\\\\bioskopticketing\\\\src\\\\pages\\\\historyTransaction.jsx\";\nimport React from 'react';\nimport { Table } from 'reactstrap';\nimport Axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport numeral from 'numeral';\n\nclass HistoryTransaction extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userdata: [],\n      movielist: [],\n      price: 35000\n    };\n\n    this.printhistory = () => {\n      console.log(this.state.userdata);\n      var jsx = this.state.userdata.map((val, index) => {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, index + 1), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, this.state.movielist[val.movId - 1]), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, val.ticket), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"Rp. \" + numeral(this.state.price * val.ticket).format(0, 0)));\n      });\n      return jsx;\n    };\n  }\n\n  componentDidMount() {\n    Axios.get('http://localhost:2000/users?username=' + this.props.currentUser).then(res => {\n      var history = res.data[0].transaction;\n      this.setState({\n        userdata: history\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    Axios.get('http://localhost:2000/movies').then(res => {\n      var listorder = res.data.sort((a, b) => {\n        return a.id - b.id;\n      }); // SORT ASCENDING\n\n      listorder.map(val => {\n        this.state.movielist.push(val.title);\n      });\n      console.log(this.state.movielist);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mycontainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Table, {\n      dark: true,\n      className: \"mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"No\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Movie Name\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Total Ticket\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Total Price\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, this.printhistory()))), \")\");\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.CURRENT_USER_DATA.currentUser,\n    IS_ADMIN: state.CURRENT_USER_DATA.IS_ADMIN,\n    IS_LOGGED_IN: state.CURRENT_USER_DATA.IS_LOGGED_IN\n  };\n};\n\nexport default connect(mapStateToProps)(HistoryTransaction);","map":{"version":3,"sources":["C:\\Users\\Enverd\\Purwadhika\\FrontEnd\\bioskopticketing\\src\\pages\\historyTransaction.jsx"],"names":["React","Table","Axios","Link","connect","numeral","HistoryTransaction","Component","state","userdata","movielist","price","printhistory","console","log","jsx","map","val","index","movId","ticket","format","componentDidMount","get","props","currentUser","then","res","history","data","transaction","setState","catch","err","listorder","sort","a","b","id","push","title","render","mapStateToProps","CURRENT_USER_DATA","IS_ADMIN","IS_LOGGED_IN"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Table } from 'reactstrap'\r\nimport Axios from 'axios';\r\n\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport numeral from 'numeral'\r\n\r\n\r\nclass HistoryTransaction extends React.Component{\r\n    state = {\r\n        userdata : [],\r\n        movielist : [],\r\n        price : 35000\r\n    }\r\n    componentDidMount(){\r\n        Axios.get('http://localhost:2000/users?username='+ this.props.currentUser)\r\n        .then((res)=>{\r\n            var history  = res.data[0].transaction\r\n            this.setState({\r\n                userdata : history\r\n            })\r\n            \r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n\r\n        Axios.get('http://localhost:2000/movies')\r\n        .then((res)=>{\r\n          var listorder =  res.data.sort((a,b)=>{\r\n                return (a.id) - (b.id)\r\n            }) // SORT ASCENDING\r\n         \r\n\r\n            listorder.map((val)=>{\r\n                this.state.movielist.push(val.title)\r\n            })\r\n            console.log(this.state.movielist)\r\n\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n        \r\n    }\r\n\r\n    printhistory = () =>{\r\n        console.log(this.state.userdata)\r\n        var jsx = this.state.userdata.map((val,index)=> {\r\n            return(\r\n                <tr>\r\n                    <td>{index+1}</td>\r\n                    <td>{this.state.movielist[val.movId-1]}</td>\r\n                    <td>{val.ticket}</td>\r\n                    <td>{\"Rp. \" + numeral(this.state.price * val.ticket).format(0,0)}</td>\r\n                </tr>\r\n            )\r\n        })\r\n        return jsx\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                   \r\n            \r\n            <div className=\"mycontainer\">\r\n            \r\n               <Table dark className=\"mt-5\">\r\n             \r\n                   <thead>\r\n                        <tr>\r\n                            <td>No</td>\r\n                            <td>Movie Name</td>\r\n                            <td>Total Ticket</td>\r\n                            <td>Total Price</td>\r\n                        </tr>\r\n                   </thead>\r\n                   <tbody>\r\n                        \r\n                        {this.printhistory()}\r\n                        \r\n                   </tbody>\r\n                   \r\n                   \r\n               </Table>\r\n               \r\n               </div>\r\n           \r\n        \r\n    )\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n       currentUser : state.CURRENT_USER_DATA.currentUser,\r\n       IS_ADMIN : state.CURRENT_USER_DATA.IS_ADMIN,\r\n       IS_LOGGED_IN : state.CURRENT_USER_DATA.IS_LOGGED_IN\r\n       \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(HistoryTransaction);"]},"metadata":{},"sourceType":"module"}